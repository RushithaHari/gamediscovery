# ==============================================================================
# IMPORTS
# ==============================================================================
use strict;
use warnings;
require "../_shared/functions.pl";

# ==============================================================================
# MAIN LOOP
# ==============================================================================
while(<>){
    # split parts
    (my $source, my $type, my $target) = split(" ", $_, 3);

    # ==========================================================================
    # SOURCE
    # ==========================================================================
    # entity
    (my $capture) = $source =~ /.*entity\/(.+)>/;
    if(!$capture){
        next;
    }
    my $sourceId = $capture;

    # ==========================================================================
    # TYPE
    # ==========================================================================
    my $typeId;

    # name
    if ($type eq "<http://schema.org/name>"){
        $type = "name";
    # property
    } elsif ($type =~ /.*direct\/(.+)>/){
        $typeId = $1;
    } else{
        next;
    }

    # ==========================================================================
    # TARGET
    # ==========================================================================
    my $targetId;

    # entity
    ($capture) = $target =~ /.*entity\/(.+)>/;
    if($capture){
        $targetId = $capture;
    }

    # target not found
    if(!$capture){
        next;
    }

    # ==========================================================================
    # OUTPUT
    # ==========================================================================
    #print "$sourceId\t$typeId\t$targetId\n"
}
